# Руководство по деплою монорепозитория AiSync.me на Vercel

## Настройка проекта в Vercel

Для корректного деплоя монорепозитория AiSync.me на Vercel необходимо выполнить следующие шаги:

1. **Создайте новый проект в Vercel**
   - Импортируйте репозиторий `KLASTER-DIGITAL/aisync-me` из GitHub
   - В настройках проекта укажите:
     - Framework Preset: Next.js
     - Root Directory: `apps/web`
     - Build Command: `npm run build`
     - Output Directory: `.next`

2. **Настройте переменные окружения**
   - В разделе Environment Variables добавьте все необходимые переменные из файла `.env.example`
   - Для продакшн-окружения укажите:
     ```
     NEXT_PUBLIC_APP_URL=https://aisync.me
     ```

3. **Настройте домен**
   - В разделе Domains добавьте ваш домен `aisync.me`
   - Следуйте инструкциям по настройке DNS

## Структура проекта

Проект AiSync.me имеет монорепозиторную структуру:

```
aisync.me/
├── apps/
│   ├── web/          # Next.js веб-приложение
│   └── mobile/       # React Native мобильное приложение (будущее)
├── packages/         # Общие пакеты
└── scripts/          # Скрипты для автоматизации
```

## Автоматический деплой

При каждом пуше в ветку `main` Vercel автоматически запускает новый деплой. Для отправки изменений в GitHub используйте:

```bash
npm run push
```

Скрипт выполнит следующие действия:
1. Проверит код линтером
2. Запросит сообщение коммита
3. Отправит изменения в GitHub

## Решение проблем с деплоем

Если возникают проблемы с деплоем:

1. **Проверьте настройки проекта в Vercel**
   - Убедитесь, что Root Directory установлен как `apps/web`
   - Проверьте, что Framework Preset выбран как Next.js

2. **Проверьте файл vercel.json**
   - Файл должен находиться в директории `apps/web`
   - Содержит корректные настройки для Next.js

3. **Исключите директорию .next из Git**
   - Убедитесь, что `apps/web/.next` добавлена в `.gitignore`
   - Удалите директорию из Git, если она была добавлена ранее:
     ```bash
     git rm -r --cached apps/web/.next
     ```

4. **Проверьте логи сборки в Vercel**
   - Анализируйте ошибки в разделе Build Logs

## Дополнительные команды

- `npm run deploy` - ручной деплой через Vercel CLI
- `npm run deploy:preview` - создание предварительного деплоя
- `npm run deploy:auto` - полностью автоматизированный деплой
